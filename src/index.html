<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>MeOS</title>
    <link rel="stylesheet" rel="preload" href="/css/main.css">
    <link rel="stylesheet" href="/css/fix-scrollbar.css">
    <link rel="stylesheet" rel="preload" href="/css/desktop.css">
    <link rel="stylesheet" rel="preload" href="/css/taskbar.css">

    <!-- MODULES -->
    <script src="/modules/share.js"></script>


    <!-- COMPONENTS -->

    <!-- windows -->
    <script src="/components/windows.js" rel="preload" type="module"></script>
    <link rel="stylesheet" href="/css/window-defaults.css">
    
    <!-- notifications -->
    <script src="/components/notifications.js" rel="preload" type="module"></script>
    <link rel="stylesheet" href="/css/push-notifications.css">
    <script src="/js/notifications.js"></script>

    <!-- calendar widget -->
    <script src="/components/calendar.js" rel="preload" type="module"></script>

    <!-- taskbar apps -->
    <script src="/components/taskbar-app.js" rel="preload" type="module"></script>
    <script src="/js/taskbar-apps.js"></script>

    
    <!-- SCRIPTS -->
    <link rel="preload" href="/assets/weather/data.json" as="fetch" crossorigin="anonymous">
    <script src="/js/taskbar/weather.js"></script>
    <link rel="preload" href="/assets/connection/no-wifi.svg" as="image">
    <script src="/js/taskbar/internet-connection.js"></script>
    <script src="/js/taskbar/sound.js"></script>
    <script src="/js/taskbar/clock.js" rel="preload"></script>
    <script src="/js/taskbar/battery.js" defer></script>
    <link rel="stylesheet" href="/css/action-menu.css">
    <script src="/js/taskbar/action-menu.js"></script>
    <script src="/js/welcome.js"></script>
    <script src="/js/context-menu.js"></script>
    <link rel="stylesheet" href="/css/context-menu.css">

    
    <!-- PWA -->
    <script src="/pwa/register.js" async></script>

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#191919">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    <!-- CUSTOM PRELOAD -->
    <script src="/js/idle-resources.js" defer></script>

    <idle-resource src="/assets/sound/speaker-muted.svg" type="image"></idle-resource>
    <idle-resource src="/assets/sound/speaker-1.svg" type="image"></idle-resource>
    <idle-resource src="/assets/sound/speaker-2.svg" type="image"></idle-resource>
    <idle-resource src="/assets/sound/speaker-3.svg" type="image"></idle-resource>
    <idle-resource src="/assets/sound/speaker.svg" type="image"></idle-resource>
</head>
<body>
    <div id="context-menu">
        <div class="vertical-section">
            <button onclick="window.history.back();">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M11.62 3.81 7.43 8l4.19 4.19-1.53 1.52L4.38 8l5.71-5.71 1.53 1.52z"/></svg>
            </button>
            <button onclick="window.history.forward();">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.38 12.19 8.57 8 4.38 3.81l1.53-1.52L11.62 8l-5.71 5.71-1.53-1.52z"/></svg>
            </button>
            <button onclick="window.location.reload();">
                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><script xmlns=""/><path d="m500.33 0h-47.41a12 12 0 0 0 -12 12.57l4 82.76a247.42 247.42 0 0 0 -188.92-87.33c-136.66 0-248.1 111.53-248 248.19.1 136.88 111.1 247.81 248 247.81a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0 -16.38-.55 176 176 0 1 1 29.82-230.31l-101.53-4.87a12 12 0 0 0 -12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12v-200.34a12 12 0 0 0 -12-12z"/></svg>
            </button>
            <button onclick="window.location.href='/about/';">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path d="M23 9.99V22a2.006 2.006 0 0 1-2 2h-6v-8h-5v8H4a2.006 2.006 0 0 1-2-2V9.99a1.999 1.999 0 0 1 .79-1.59L12.5 1l9.71 7.4A1.999 1.999 0 0 1 23 9.99z"/></svg>
            </button>
        </div>
        <div class="separator"></div>
        <button onclick="document.documentElement.requestFullscreen();">
            <svg aria-hidden="true" style="stroke: var(--icon-fill);" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            Full Screen
        </button>
        <button onclick="document.exitFullscreen();">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 13H5a1 1 0 0 0 0 2h2.586l-5.293 5.293a1 1 0 0 0 1.414 1.414L9 16.414V19a1 1 0 0 0 2 0v-5a1 1 0 0 0-1-1zM16.414 15H19a1 1 0 0 0 0-2h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 2 0v-2.586l5.293 5.293a1 1 0 0 0 1.414-1.414zM10 4a1 1 0 0 0-1 1v2.586L3.707 2.293a1 1 0 0 0-1.414 1.414L7.586 9H5a1 1 0 0 0 0 2h5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1zM14 11h5a1 1 0 0 0 0-2h-2.586l5.293-5.293a1 1 0 1 0-1.414-1.414L15 7.586V5a1 1 0 0 0-2 0v5a1 1 0 0 0 1 1z"/></svg>
            Minimize
        </button>
    </div>

    <!-- Desktop -->
    <div id="desktop">
        <h1>MeOS</h1>
        <app-window name="About" class="website">
            <iframe src="/about/" frameborder="0"></iframe>
        </app-window>
        <div id="push-notifications">
            <!-- Notifications will be added here -->
        </div>
        <div id="action-menu">
            <div class="notifications scrollbar-slim">
                <header>
                    <h3>Notifications</h3>
                    <button class="clear-all">Clear all</button>
                </header>
                <div class="list">
                    <!-- Notifications will be added here -->
                </div>
            </div>
            <calendar-widget class="calendar"></calendar-widget>
        </div>
    </div>

    <!-- Taskbar -->
    <div id="taskbar">
        <section class="weather" title="20°C Cloudy">
            <!-- WEATHER -->
            <img class="weather" src="/assets/weather/sunny-day.svg" alt="weather">
            <div class="text">
                <h2 class="temp">20°C</h2>
                <p class="desc">Cloudy</p>
            </div>
        </section>

        <section class="apps" style="width: 60vw;">
            <!-- APPS -->
            <taskbar-app name="About" icon="/assets/apps/about.svg" class="open" onclick="openApp(this); window.open('/about/')"></taskbar-app>
            <taskbar-app name="Share" icon="/modules/share-white.svg" onclick="openApp(this); 
            const clipboard = function(element) {
                console.log(element);
                element.setAttribute('icon', '/modules/copy-white.svg');
                setTimeout(() => {
                    element.setAttribute('icon', '/modules/share-white.svg');
                }, 1000);
            };
            share(clipboard(this), undefined, undefined, description = 'Check out MeOS!');"></taskbar-app>
        </section>

        <section class="menu">
            <!-- MENU -->
            <div class="internet-access icon"
                title="Winternet&#013No connection"
                title-online="WiFi-Name&#013Internet access"
                title-offline="No internet access&#013No connections available"
                >
                <!-- 
                    title = default,
                    title-online = when connected,
                    title-offline = when not connected
                -->


                <img alt="Wifi"
                    src="/assets/connection/wifi.svg"
                    src-online="/assets/connection/wifi.svg"
                    src-offline="/assets/connection/no-wifi.svg"
                >
                <!-- src = default,
                     src-online = when connected,
                     src-offline = when not connected
                -->
            </div>

            <div class="speaker icon" title="Speakers (RTalk(L) Audio): 0%">
                <img alt="speaker"
                    src="/assets/sound/speaker.svg"
                    src-no="/assets/sound/speaker-muted.svg"
                    src-1="/assets/sound/speaker-1.svg"
                    src-2="/assets/sound/speaker-2.svg"
                    src-3="/assets/sound/speaker-3.svg"
                    src-error="/assets/sound/speaker.svg"
                    speaker-levels="3"
                >
                <!-- if the number of src-n values are changed, the `speaker-levels` attribute must be changed
                     each src-n value is a different volume level -> currently 3 levels
                 -->
            </div>
            
            <div class="battery icon" title="Battery status: fetching...">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="40" height="40" viewBox="0 0 2048 2048" fill="white" style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd">
                    <style>
                        [class^="fill-"] { display: none; }
                        .charging { display: none; }
                    </style>
                    <g>
                        <g>
                            <!-- BORDER --><path d="M1674.24 770.169V874.24h85.761c17.673 0 32 14.328 32 32v235.52c0 17.674-14.327 32.002-32 32.002h-85.761v104.069c0 36.013-14.71 68.73-38.408 92.43-23.698 23.697-56.417 38.407-92.429 38.407H386.833c-36.012 0-68.73-14.71-92.428-38.408-23.698-23.7-38.408-56.416-38.408-92.43V770.17c0-36.013 14.71-68.73 38.408-92.43 23.698-23.698 56.417-38.408 92.428-38.408h1156.57c36.012 0 68.731 14.71 92.429 38.408 23.697 23.7 38.408 56.417 38.408 92.43zm-64.002 136.071V770.169c0-18.346-7.53-35.05-19.657-47.18-12.127-12.127-28.832-19.656-47.178-19.656H386.833c-18.346 0-35.05 7.53-47.178 19.657-12.127 12.128-19.657 28.833-19.657 47.179v507.662c0 18.346 7.53 35.05 19.657 47.18 12.128 12.127 28.832 19.656 47.178 19.656h1156.57c18.346 0 35.05-7.53 47.178-19.657 12.128-12.129 19.657-28.833 19.657-47.179v-136.07c0-17.673 14.328-32 32.001-32H1728V938.24h-85.76c-17.674 0-32.002-14.328-32.002-32z" />
                            <!-- TEXT --><text class="text" style="font-family: Arial, sans-serif; font-size: 564.4px; font-weight: 700; text-transform: capitalize; white-space: pre; text-anchor: middle;" x="965.164" y="1218.665">?</text>
                            <!-- BOLT --><path class="charging" d="M 2023.852 678.123 L 1924.935 678.123 L 1944.064 563.378 C 1946.46 548.901 1935.33 535.73 1920.64 535.73 L 1798.372 535.73 C 1786.767 535.73 1776.871 544.131 1774.971 555.547 L 1735.41 792.868 C 1732.99 807.344 1744.143 820.516 1758.81 820.516 L 1853.739 820.516 L 1853.739 1010.373 L 2043.833 714.694 C 2053.991 698.889 2042.647 678.123 2023.852 678.123 Z"/>
                            <path class="fill-1" d="M467.188 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-1" d="M467.188 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-1" d="M467.188 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-2" d="M584.95 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-2" d="M584.95 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-2" d="M584.95 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-3" d="M702.713 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-3" d="M702.713 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-3" d="M702.713 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-4" d="M820.476 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-4" d="M820.476 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-4" d="M820.476 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-5" d="M938.239 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-5" d="M938.239 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-5" d="M938.239 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-6" d="M1056 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-6" d="M1056 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-6" d="M1056 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-7" d="M1173.77 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-7" d="M1173.77 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-7" d="M1173.77 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-8" d="M1291.53 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-8" d="M1291.53 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-8" d="M1291.53 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-9" d="M1409.29 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-9" d="M1409.29 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-9" d="M1409.29 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                            <path class="fill-10" d="M1527.05 773.76c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V773.76z" />
                            <path class="fill-10" d="M1527.05 979.84c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32V979.84z" />
                            <path class="fill-10" d="M1527.05 1185.92c0-17.673-14.328-32-32-32-17.674 0-32.002 14.327-32.002 32v88.32c0 17.673 14.328 32.001 32.001 32.001s32.001-14.328 32.001-32v-88.321z" />
                        </g>
                    </g>
                </svg>
            </div>
        </section>

        <section class="time" title="Tuesday, 30. January 2024">
            <!-- DISPLAY TIME -->
            <div class="time">14:51</div>
            <div class="date">30/01/2024</div>
            <!-- Would you like to know why I chose 14:51 on January 30, 2024? -->
            <!-- I chose this time and date because it was the exact time I started the WebOS project. -->
        </section>
    </div>

    <script>
        function checkLoadEventEnd() {
            if (performance.timing.loadEventEnd !== 0) {
                calculatePageLoadTime();
            } else {
                setTimeout(checkLoadEventEnd, 100);
            }
        }

        function calculatePageLoadTime() {
            // calculate console.log color based on value and thresholds
            function calculateColor(value, middle, max) {
                if (value < middle) {
                    return `green`;
                } else if (value >= middle && value < max) {
                    return `orange`;
                } else {
                    return `red`;
                }
            }

            const page_load_time = performance.timing.loadEventEnd - performance.timing.fetchStart;
            const dcl = performance.timing.domComplete - performance.timing.domInteractive;

            console.info(`%c[PERFORMANCE]%c Page load time is %c${page_load_time}%c ms`, "color: orange", "color: inherit", `color: ${calculateColor(page_load_time, 1000, 3000)};`, "color: inherit;");
            console.info(`%c[PERFORMANCE]%c DOM Content Loaded (DCL): %c${dcl}%c ms`, "color: orange", "color: inherit", `color: ${calculateColor(dcl, 800, 1200)};`, "color: inherit;");
        }

        window.addEventListener("load", checkLoadEventEnd, false);
    </script>
</body>
</html>